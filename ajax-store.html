<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Online Store</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="js/keys.js"></script>
</head>
<body>

<div class="card">
    <div class="d-flex justify-self-center"><img src="img/ToolGroupLogoLarge.jpg" class="card-img-top"  style="width: 300px"></div>

    <div class="card-body">
        <h5 class="card-title">My Tool Store</h5>
        <div class="table-responsive-lg">
            <table class="table" id="products">
                <thead>
                <tr>
                    <th>Tool</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Categories</th>
                </tr>
                </thead>
                <tbody id="insertProducts"></tbody>
            </table>
        </div>
        <button id="refresh" type="button">Load Inventory</button>
    </div>
</div>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script>
(function() {
    "use strict";
    // TODO: Create an AJAX GET request for the file under data/inventory.json
    $().ready(function (){
        $('#refresh').click(function (){
            $('#insertProducts').html(null);

            $.get("data/inventory.json").done(function (data,status,jqXhr){
              alert('Data retrieved');

              console.log(data);
              data.forEach(function (item){
                  $('#insertProducts').append("<tr><td>" + item.title + "</td><td>" + item.quantity + "</td><td>" + item.price + "</td><td>" + item.categories.join(", ") + "</td></tr>" );
              })
          })
        })

        $.get("http://api.openweathermap.org/data/2.5/forecast?id=524901&APPID=" + WEATHER_TOKEN).done(function (data){
            console.log(data);
        })
    })
    // TODO: Take the data from inventory.json and append it to the products table
})();
</script>

</body>
</html>
